{"version":3,"sources":["reportWebVitals.js","index.js","firebase.js","App.js"],"names":["reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","createRoot","document","getElementById","render","StrictMode","App","firebaseConfig","apiKey","process","REACT_APP_atestpiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","app","initializeApp","db","getFirestore","uCollection","cCollection","useState","people","setPeople","isError","updateError","show","hideModal","currentName","changeName","titles","changeTitles","userCount","changeCount","periods","changePeriods","useEffect","fetchUsers","getUsersRef","collection","getDocs","usersSnapshot","result","size","updateFirebase","data","username","userRef","doc","getDoc","userRefSnap","userExists","exists","newPeople","map","pd","classRef","sch","docSnap","newValue","value","push","name","updateDoc","setDoc","val","setTimeout","encrypt","secret","nacl","require","encodeBase64","nonce","randomBytes","secretKey","Buffer","from","secretData","encrypted","secretbox","fetchData","event","preventDefault","target","password","username_encrypted","password_encrypted","fetch","res","json","error","reset","bg","variant","Brand","Link","backdrop","keyboard","centered","Header","Title","className","Body","onSubmit","Group","Label","Control","type","placeholder","isInvalid","Text","id","style","width","Footer","length","e","Item"],"mappings":"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","file":"static/js/main.6c6990c8.chunk.js","sourcesContent":["const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom/client';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\n//import bootstrap css\nimport 'bootstrap/dist/css/bootstrap.min.css';\n\nconst root = ReactDOM.createRoot(document.getElementById('root'));\nroot.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n","// Import the functions you need from the SDKs you need\r\nimport { initializeApp } from \"firebase/app\";\r\nimport { getFirestore } from 'firebase/firestore'\r\n// TODO: Add SDKs for Firebase products that you want to use\r\n// https://firebase.google.com/docs/web/setup#available-libraries\r\n// Your web app's Firebase configuration\r\n// For Firebase JS SDK v7.20.0 and later, measurementId is optional\r\n\r\nconst firebaseConfig = {\r\n  apiKey: process.env.REACT_APP_atestpiKey,\r\n  authDomain: process.env.REACT_APP_authDomain,\r\n  projectId: process.env.REACT_APP_projectId,\r\n  storageBucket: process.env.REACT_APP_storageBucket,\r\n  messagingSenderId: process.env.REACT_APP_messagingSenderId,\r\n  appId: process.env.REACT_APP_appId,\r\n  measurementId: process.env.REACT_APP_measurementId\r\n};\r\n\r\n// Initialize Firebase\r\nconst app = initializeApp(firebaseConfig);\r\nconst db = getFirestore(app)\r\n\r\nexport default db","import React, { useState, useEffect } from 'react'\nimport './App.css'\n\nimport { Navbar, Container, Nav, } from 'react-bootstrap';\nimport { Modal } from 'react-bootstrap'\nimport { InputGroup, Button, Form, ListGroup } from 'react-bootstrap';\n\nimport db from './firebase.js';\nimport { getDocs, collection, doc, updateDoc, getDoc, setDoc } from 'firebase/firestore'\n\nimport { AiFillCheckCircle } from 'react-icons/ai';\n\nconst uCollection = \"users2\"\nconst cCollection = \"classes2\"\n\nconst App = () => {\n\n  const [people, setPeople] = useState([])\n  const [isError, updateError] = useState(0)\n  const [show, hideModal] = useState(true)\n  const [currentName, changeName] = useState(\"\");\n  const [titles, changeTitles] = useState({\"0\": \"Homeroom\", \"1\": \"Period 1\", \"2\": \"Period 2\", \"3\": \"Period 3\", \"4\": \"Period 4\", \"6\": \"Period 6\", \"7\": \"Period 7\", \"8\": \"Period 8\", \"9\": \"Period 9\",})\n  const [userCount, changeCount] = useState(0)\n  const [periods, changePeriods] = useState(['0', '1', '2', '3', '4', '6', '7', '8', '9'])\n\n  useEffect(() => {\n\n    const fetchUsers = async () => {\n      const getUsersRef = collection(db, uCollection);\n      const usersSnapshot = await getDocs(getUsersRef);\n      return usersSnapshot;\n    }\n\n    fetchUsers().then((result)=>changeCount(result.size))\n    \n  }, [])\n\n  const updateFirebase = async (data, username) => {\n\n    //check if user is already registered\\\n    const userRef = doc(db, uCollection, username)\n    const userRefSnap = await getDoc(userRef);\n    var userExists = userRefSnap.exists();\n\n    const newPeople = []\n\n    if (!userExists) {\n      periods.map(async (pd) => {\n        const classRef = doc(db, cCollection, data.sch[pd]);\n        const docSnap = await getDoc(classRef);\n\n        if (docSnap.exists()) {\n\n          const newValue = docSnap.data().value\n          newValue.push(data.name)\n          await updateDoc(classRef, {\n            value: newValue\n          })\n          newPeople.push(newValue)\n\n        } else {\n\n          await setDoc(doc(db, cCollection, data.sch[pd]), {\n            value: [data.name]\n          });\n          newPeople.push([data.name])\n\n        }\n      })\n\n      await setDoc(doc(db, uCollection, username), {});\n\n    } else {\n\n      periods.map(async (pd) => {\n        const classRef = doc(db, cCollection, data.sch[pd]);\n        const docSnap = await getDoc(classRef);\n\n        const val = docSnap.data().value\n        newPeople.push(val)\n\n      })\n\n    }\n    changeName(data.name)\n    changeTitles(data.titles)\n    setTimeout(()=>setPeople(newPeople), 1000)\n  }\n\n  const encrypt = (secret) => {\n    const nacl = require('tweetnacl')\n    const utils = require('tweetnacl-util')\n    const encodeBase64 = utils.encodeBase64\n    // Our nonce must be a 24 bytes Buffer (or Uint8Array)\n    const nonce = nacl.randomBytes(24)\n    // Our secret key must be a 32 bytes Buffer (or Uint8Array)\n    const encryptionKey = process.env.REACT_APP_encryptionKey\n    const secretKey = Buffer.from(encryptionKey, 'utf8')\n    // Make sure your data is also a Buffer of Uint8Array\n    const secretData = Buffer.from(secret, 'utf8')\n    const encrypted = nacl.secretbox(secretData, nonce, secretKey)\n    // We can now store our encrypted result and our nonce somewhere\n    const result = `${encodeBase64(nonce)}:${encodeBase64(encrypted)}`\n    return result\n  };\n\n  const fetchData = async (event) => {\n\n    event.preventDefault();\n    const username = event.target[0].value;\n    const password = event.target[1].value;\n\n    const username_encrypted = encrypt(username)\n    const password_encrypted = encrypt(password)\n\n    fetch(\"/getData?username=\"+username_encrypted+\"&password=\"+password_encrypted).then(\n      res => {\n        return res.json();\n      }\n    ).then(\n      async (data) => {\n\n        if (data.error === 500) {\n          event.target.reset()\n          updateError(500);\n          throw \"Invalid Login\"\n        } if (data.error === 501) {\n          event.target.reset()\n          updateError(501);\n          throw \"Not Updated\"\n        }\n\n        changePeriods(data.periods)\n        await updateFirebase(data, username)\n        hideModal(false)   \n      }\n    )\n  }\n\n  return (\n    <div>\n      <Navbar bg=\"dark\" variant=\"dark\">\n        <Container>\n          <Navbar.Brand>MCPS Schedule Comparer </Navbar.Brand>\n          \n          <Nav>\n            <Nav.Link>{currentName!==0 && <div>{currentName}</div>}</Nav.Link>\n          </Nav>\n        </Container>\n      </Navbar>\n\n      <Modal\n        show={show}\n        size=\"lg\"\n        backdrop=\"static\"\n        keyboard={false}\n        centered\n      >\n        <Modal.Header>\n          <Modal.Title className=\"modalTitle\"> <h1>{\"Sign In (Semester 2)\"}</h1> </Modal.Title>\n        </Modal.Header>\n        <Modal.Body>\n\n            <div className=\"moreInfo\"> <h4>MCPS Schedule Comparer <span className=\"label\">by Dhruva Arun</span> </h4>   <p className=\"label\">User Count: {userCount}</p> </div>\n\n              <Form onSubmit={fetchData}>\n\n                {(isError === 500) && <p className=\"error\">Invalid Username or Password!</p>}\n                {(isError === 501) && <p className=\"error\">Semester 2 not available for your school!</p>}\n\n                  <Form.Group className=\"mb-4\">\n                      <Form.Label> <b>Username</b> </Form.Label>\n                      <InputGroup> \n                          <Form.Control \n                          type=\"username\"\n                          placeholder=\"Enter Username\"\n                          isInvalid={ (isError === 500) } />\n                          <InputGroup.Text id=\"basic-addon1\">@mcpsmd.net</InputGroup.Text>\n                      </InputGroup>\n                      <br />\n                      <Form.Label> <b>Password</b> </Form.Label>\n                      <InputGroup> \n                          <Form.Control \n                          type=\"password\" \n                          placeholder=\"Enter Password\"\n                          isInvalid={ isError  === 500} />\n                      </InputGroup>\n                          \n                  </Form.Group>\n                  \n                  <Button className=\"modalSubmit\" variant=\"primary\" type=\"submit\" size=\"lg\" style={{width:\"100%\"}}>\n                      Submit\n                  </Button>\n\n                  <Modal.Footer>\n                    <div className=\"safety\">\n                        <div className=\"segment\">\n                          <AiFillCheckCircle className=\"check\" size={90}/>\n                          <p>All Data Encrypted</p>\n                        </div>\n                        <div className=\"segment\">\n                          <AiFillCheckCircle className=\"check\" size={90}/>\n                          <p>No Login Information Stored</p>\n                        </div>\n                    </div>\n                  </Modal.Footer>\n\n                  <footer className=\"footer\">Compare Your Schedule with Other Blair Students! <br></br> Contact QuickMathzs#0600 on Discord to Report Bugs </footer>\n\n              </Form>\n\n        </Modal.Body>\n      </Modal>\n\n      <div className=\"periods\">\n        {people.length !== 0 && (\n          people.map((pd, e)=> {\n            return(\n              <ListGroup key={e} className=\"pd\">\n                <h4>{periods[e] + \": \" + titles[periods[e]]}</h4>\n                {pd.map((name) => {return(\n                  <><ListGroup.Item key={e+10}>{name}</ListGroup.Item></>)\n                })}\n              </ListGroup>\n            )\n          })\n        )}\n      </div>\n\n    </div>\n  )\n}\n\nexport default App\n"],"sourceRoot":""}